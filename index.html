<!DOCTYPE html>
<html lang="kk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>“∞–ª–ø–∞–Ω: “ö–∞–∑–∞“õ ”ô–¥–µ–±–∏–µ—Ç—ñ–Ω–µ–Ω —Å–∞–Ω–¥—ã“õ –æ“õ—É –∫–µ—à–µ–Ω—ñ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Roboto:wght@300;400;700&display=swap');
        
        body {
            font-family: 'Roboto', sans-serif;
            background-color: #0c1e35;
            color: #f1f5f9;
        }
        .cinema-title {
            font-family: 'Playfair Display', serif;
            letter-spacing: 2px;
        }
        .quiz-card {
            background: rgba(30, 41, 100, 0.4);
            backdrop-filter: blur(10px);
            border: 1px solid #334155;
            transition: all 0.3s ease;
        }
        .media-container {
            border: 8px solid #1e293b;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
            background-color: #ffffff;
        }
        .assessment-rubric {
            background: rgba(15, 23, 42, 0.9);
            border-left: 4px solid #f59e0b;
        }
        .author-img {
            object-fit: cover;
            object-position: top;
        }
        /* –ê–Ω–∏–º–∞—Ü–∏—è–ª–∞—Ä */
        @keyframes popIn {
            0% { transform: scale(0.9); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }
        .animate-pop {
            animation: popIn 0.3s ease-out forwards;
        }
        
        /* –ñ–∞—É–∞–ø —Å—Ç–∏–ª—å–¥–µ—Ä—ñ */
        .correct-answer {
            border: 2px solid #22c55e !important;
            background-color: rgba(34, 197, 94, 0.2) !important;
            color: #ffffff !important;
        }
        .wrong-answer {
            border: 2px solid #ef4444 !important;
            background-color: rgba(239, 68, 68, 0.2) !important;
            color: #ffffff !important;
        }

        .responsive-iframe-container {
            position: relative;
            padding-bottom: 56.25%;
            height: 0;
            overflow: hidden;
        }
        .responsive-iframe-container iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }
        .audio-strip-container {
            position: relative;
            height: 200px;
            overflow: hidden;
            border-radius: 12px;
            border: 2px solid #f59e0b;
            background-color: #000;
        }
    </style>
</head>
<body class="p-4 md:p-8">

    <header class="max-w-5xl mx-auto text-center mb-12">
        <div class="flex flex-col md:flex-row justify-center items-center gap-8 mb-6">
            <div class="relative group">
                <img src="https://static.insales-cdn.com/images/products/1/7303/665451655/pocketbook_obl.new-min__1_.png" 
                     alt="“∞–ª–ø–∞–Ω —Ä–æ–º–∞–Ω—ã" 
                     class="w-48 md:w-64 rounded-lg shadow-2xl border-4 border-amber-500 transition-transform group-hover:scale-105">
                <p class="text-xs text-amber-500 mt-2 font-bold uppercase">–†–æ–º–∞–Ω</p>
            </div>
            <div class="relative group">
                <img src="https://el.kz/storage/storage/element/2020/01/20/mainphoto/1945/1200xauto_PwvXRCOgutembapgFPcnv6ikcjZfxRugR9BLfMzU.jpg" 
                     alt="“í–∞–±–∏—Ç –ú“Ø—Å—ñ—Ä–µ–ø–æ–≤" 
                     class="w-48 md:w-64 h-64 md:h-80 author-img rounded-lg shadow-2xl border-4 border-slate-400 transition-transform group-hover:scale-105">
                <p class="text-xs text-slate-400 mt-2 font-bold uppercase">“í–∞–±–∏—Ç –ú“Ø—Å—ñ—Ä–µ–ø–æ–≤</p>
            </div>
        </div>
        <h1 class="cinema-title text-4xl md:text-6xl text-amber-500 mt-4 uppercase font-bold">“∞–õ–ü–ê–ù</h1>
        <p class="text-xl text-slate-400 italic">“ö–∞–∑–∞“õ ”ô–¥–µ–±–∏–µ—Ç—ñ–Ω–µ–Ω —Å–∞–Ω–¥—ã“õ –æ“õ—É –∫–µ—à–µ–Ω—ñ</p>
    </header>

    <!-- –¢–∞–Ω—ã—Å—Ç—ã—Ä—ã–ª—ã–º -->
    <section class="max-w-5xl mx-auto mb-16">
        <h2 class="cinema-title text-2xl text-amber-500 uppercase flex items-center gap-3 mb-6">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-amber-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 12l3-3 3 3m0 6l-3-3-3 3" />
            </svg>
            "“∞–ª–ø–∞–Ω" —Ä–æ–º–∞–Ω—ã –±–æ–π—ã–Ω—à–∞ —Ç–∞–Ω—ã—Å—Ç—ã—Ä—ã–ª—ã–º
        </h2>
        <div class="media-container bg-white">
            <div class="responsive-iframe-container">
                <iframe src="https://docs.google.com/presentation/d/e/2PACX-1vQBpK_9rl0RYNv4lxGvfZvBshyGBh1ctJ4TyVGgqQiGw3VT-qs6ynYkAkBqE_R8b1JPQBZVRyEOLndR/pubembed?start=false&loop=false" 
                        frameborder="0" allowfullscreen="true" mozallowfullscreen="true" webkitallowfullscreen="true"></iframe>
            </div>
        </div>
    </section>

    <!-- –î—ã–±—ã—Å—Ç—ã“õ –∂–∞–∑–±–∞ -->
    <section class="max-w-4xl mx-auto mb-16">
        <div class="flex items-center gap-3 mb-4">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-amber-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z" />
            </svg>
            <h2 class="cinema-title text-2xl text-amber-500 uppercase">–†–æ–º–∞–Ω –±–æ–π—ã–Ω—à–∞ –¥—ã–±—ã—Å—Ç—ã“õ –∂–∞–∑–±–∞</h2>
        </div>
        <div class="audio-strip-container shadow-2xl">
            <iframe src="https://drive.google.com/file/d/1ERkloqZvPDFp8s5JLdTwHeT90pDrmIlgo7zSgASzEuw/preview" 
                    width="100%" height="100%" frameborder="0" allow="autoplay"></iframe>
        </div>
    </section>

    <!-- –ñ—É—Ä–Ω–∞–ª (PDF) -->
    <section class="max-w-5xl mx-auto mb-16">
        <h2 class="cinema-title text-2xl text-amber-500 mb-6 uppercase flex items-center gap-3">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253" />
            </svg>
            –û“õ—É –º–∞—Ç–µ—Ä–∏–∞–ª—ã (PDF)
        </h2>
        <div class="media-container bg-slate-900" style="height: 700px;">
            <iframe src="https://drive.google.com/file/d/1Ha96mCo_WoyRIMf2ixPFnu6il36UqkMp/preview" 
                    width="100%" height="100%" allow="autoplay" class="bg-white border-none"></iframe>
        </div>
        <p class="text-sm text-slate-500 mt-3 text-center italic">–ï—Å–∫–µ—Ä—Ç—É: –ú–∞—Ç–µ—Ä–∏–∞–ª–¥—ã —Ç—ñ–∫–µ–ª–µ–π –æ—Å—ã —Ç–µ—Ä–µ–∑–µ–¥–µ–Ω –æ“õ—ã–ø —à—ã“ì—ã“£—ã–∑.</p>
    </section>

    <!-- –ó–∏—è—Ç–∫–µ—Ä–ª—ñ–∫ –æ–π—ã–Ω -->
    <section class="max-w-5xl mx-auto mb-16">
        <h2 class="cinema-title text-2xl text-amber-500 mb-6 uppercase flex items-center gap-3">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-amber-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z" />
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
            –†–æ–º–∞–Ω –º–∞–∑–º“±–Ω—ã –±–æ–π—ã–Ω—à–∞ –∑–∏—è—Ç–∫–µ—Ä–ª—ñ–∫ –æ–π—ã–Ω
        </h2>
        <div class="media-container" style="height: 600px;">
            <iframe src="https://ezas52315-alt.github.io/Ulpan/" 
                    width="100%" height="100%" frameborder="0" class="bg-slate-900 border-none"></iframe>
        </div>
    </section>

    <!-- –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤—Ç—ñ —Ç–µ—Å—Ç (–ñ–ê“¢–ê–†–¢–´–õ“í–ê–ù) -->
    <section class="max-w-4xl mx-auto mb-16">
        <h2 class="cinema-title text-3xl text-center text-amber-500 mb-8 uppercase">I –ë”®–õ–Ü–ú: –ë–Ü–õ–Ü–ú –¢–ï–ö–°–ï–†–£ (15 –°“∞–†–ê“ö)</h2>
        <div id="quiz-container" class="space-y-6"></div>
        <div class="text-center mt-8">
            <button onclick="checkQuizResults()" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-8 rounded-full shadow-lg transition-transform active:scale-95">
                ‚úì –¢–µ—Å—Ç—Ç—ñ —Ç–µ–∫—Å–µ—Ä—É
            </button>
            <p id="quiz-score-display" class="mt-4 text-2xl font-bold hidden text-amber-400"></p>
        </div>
    </section>

    <!-- –≠—Å—Å–µ –±”©–ª—ñ–º—ñ (–ñ–ê“¢–ê–†–¢–´–õ“í–ê–ù - “ö–ê–¢–ê–õ –¢–ï–ö–°–ï–†–£) -->
    <section class="max-w-4xl mx-auto mb-16">
        <h2 class="cinema-title text-3xl text-center text-amber-500 mb-8 uppercase">II –ë”®–õ–Ü–ú: –¢–ê–õ–î–ê–£ –≠–°–°–ï–°–Ü</h2>
        <div class="assessment-rubric p-6 rounded-xl mb-8">
            <h4 class="text-amber-500 font-bold mb-4 uppercase text-sm border-b border-amber-500/20 pb-2">üìã –ë–∞“ì–∞–ª–∞—É –∫—Ä–∏—Ç–µ—Ä–∏–π–ª–µ—Ä—ñ (–ú–∞–∫—Å: 10 –±–∞–ª–ª):</h4>
            <div class="grid md:grid-cols-3 gap-4 text-xs text-slate-300">
                <div class="p-4 bg-slate-800 rounded shadow-inner text-center">
                    <p class="text-amber-500 font-bold mb-1 uppercase tracking-tighter">–¢–µ–∑–∏—Å (2 –±–∞–ª–ª)</p>
                    –¢–∞“õ—ã—Ä—ã–ø—Ç—ã“£ –∞—à—ã–ª—É—ã –∂”ô–Ω–µ –Ω–µ–≥—ñ–∑–≥—ñ –æ–π–¥—ã“£ –∂“Ø–π–µ–ª—ñ–ª—ñ–≥—ñ.
                </div>
                <div class="p-4 bg-slate-800 rounded shadow-inner text-center">
                    <p class="text-amber-500 font-bold mb-1 uppercase tracking-tighter">–ê—Ä–≥—É–º–µ–Ω—Ç—Ç–µ—Ä (6 –±–∞–ª–ª)</p>
                    –ö–µ–ª—Ç—ñ—Ä—ñ–ª–≥–µ–Ω –¥”ô–ª–µ–ª–¥–µ—Ä–¥—ñ“£ —à—ã“ì–∞—Ä–º–∞ –º–∞–∑–º“±–Ω—ã–º–µ–Ω –±–∞–π–ª–∞–Ω—ã—Å—ã.
                </div>
                <div class="p-4 bg-slate-800 rounded shadow-inner text-center">
                    <p class="text-amber-500 font-bold mb-1 uppercase tracking-tighter">–°–∞—É–∞—Ç—Ç—ã–ª—ã“õ (2 –±–∞–ª–ª)</p>
                    –¢—ñ–ª–¥—ñ–∫ –Ω–æ—Ä–º–∞–ª–∞—Ä–¥—ã“£ —Å–∞“õ—Ç–∞–ª—É—ã –∂”ô–Ω–µ ”ô–¥–µ–±–∏ —Å—Ç–∏–ª—å.
                </div>
            </div>
        </div>

        <div class="quiz-card p-6 rounded-2xl">
            <label class="block mb-4">
                <span class="text-amber-500 font-bold block mb-2">–¢–∞“õ—ã—Ä—ã–ø—Ç—ã —Ç–∞“£–¥–∞“£—ã–∑:</span>
                <select id="essay-topic" class="w-full bg-slate-800 border border-slate-600 rounded p-3 text-white focus:border-amber-500 outline-none">
                    <option value="“∞–ª–ø–∞–Ω ‚Äì “õ–∞–∑–∞“õ –¥–∞–ª–∞—Å—ã–Ω–¥–∞“ì—ã —Ä–µ—Ñ–æ—Ä–º–∞—Ç–æ—Ä ”ô–π–µ–ª –±–µ–π–Ω–µ—Å—ñ">1. “∞–ª–ø–∞–Ω ‚Äì “õ–∞–∑–∞“õ –¥–∞–ª–∞—Å—ã–Ω–¥–∞“ì—ã —Ä–µ—Ñ–æ—Ä–º–∞—Ç–æ—Ä ”ô–π–µ–ª –±–µ–π–Ω–µ—Å—ñ</option>
                    <option value="–ï—Å–µ–Ω–µ–π –º–µ–Ω –¢–æ—Ä—Å–∞–Ω: –µ—Å–∫—ñ –º–µ–Ω –∂–∞“£–∞–Ω—ã“£ —Ç–∞—Ä—Ç—ã—Å—ã">2. –ï—Å–µ–Ω–µ–π –º–µ–Ω –¢–æ—Ä—Å–∞–Ω: –µ—Å–∫—ñ –º–µ–Ω –∂–∞“£–∞–Ω—ã“£ —Ç–∞—Ä—Ç—ã—Å—ã</option>
                </select>
            </label>
            <textarea id="essay-content" 
                      class="w-full bg-slate-800 border border-slate-600 rounded p-4 h-64 focus:border-amber-500 outline-none transition-colors text-white" 
                      placeholder="–≠—Å—Å–µ“£—ñ–∑–¥—ñ –æ—Å—ã –∂–µ—Ä–≥–µ –∂–∞–∑—ã“£—ã–∑..."></textarea>
            <div class="flex justify-between items-center mt-2">
                <p class="text-xs text-slate-500" id="word-count">–°”©–∑ —Å–∞–Ω—ã: 0 / 200</p>
                <p class="text-xs text-slate-500 italic uppercase tracking-tighter text-amber-500/60">–ö”©–ª–µ–º—ñ: 200 —Å”©–∑–≥–µ –¥–µ–π—ñ–Ω</p>
            </div>
        </div>
        
        <div class="text-center mt-8 pb-20">
            <button id="essay-submit-btn" onclick="submitEssayStrict()" class="bg-amber-500 hover:bg-amber-600 text-slate-900 font-bold py-4 px-12 rounded-full transition-all shadow-lg uppercase tracking-widest active:scale-95">
                –ñ“±–º—ã—Å—Ç—ã –∂—ñ–±–µ—Ä—É
            </button>
        </div>
    </section>

    <!-- –ú–æ–¥–∞–ª—å–¥—ã —Ç–µ—Ä–µ–∑–µ (–ù”ô—Ç–∏–∂–µ) -->
    <div id="report-modal" class="hidden fixed inset-0 bg-black/95 flex items-center justify-center p-4 z-50">
        <div class="bg-slate-900 w-full max-w-4xl max-h-[90vh] overflow-y-auto rounded-2xl border-2 border-amber-500 p-8 shadow-2xl animate-pop">
            <div class="flex justify-between items-center mb-6 border-b border-slate-700 pb-4">
                <h3 class="text-2xl font-bold text-amber-500 uppercase tracking-widest">–ñ“∞–ú–´–° “ö–û–†–´–¢–´–ù–î–´–°–´</h3>
                <button onclick="closeModal()" class="text-slate-400 hover:text-white text-3xl transition-colors">‚úï</button>
            </div>
            <div id="report-content" class="space-y-6 text-slate-200"></div>
            <div class="mt-8 pt-6 border-t border-slate-700 bg-amber-900/10 p-6 rounded-xl text-center shadow-inner">
                <p class="text-amber-500 font-bold uppercase text-sm mb-2 tracking-widest">–ú“±“ì–∞–ª—ñ–º–≥–µ –∞“õ–ø–∞—Ä–∞—Ç:</p>
                <p class="text-slate-300 text-sm italic">–û—Å—ã –µ—Å–µ–ø—Ç—ñ —Å–∫—Ä–∏–Ω—à–æ—Ç –∂–∞—Å–∞–ø –Ω–µ–º–µ—Å–µ —ç–∫—Ä–∞–Ω–Ω–∞–Ω –∫”©—Ä—Å–µ—Ç—ñ–ø, –º“±“ì–∞–ª—ñ–º–≥–µ —Ç–∞–ø—Å—ã—Ä—ã“£—ã–∑!</p>
            </div>
        </div>
    </div>

    <!-- –î—ã–±—ã—Å —ç—Ñ—Ñ–µ–∫—Ç—ñ–ª–µ—Ä—ñ -->
    <script>
        // –î—ã–±—ã—Å—Ç–∞—Ä–¥—ã –≥–µ–Ω–µ—Ä–∞—Ü–∏—è–ª–∞—É
        const playCorrect = () => {
            const ctx = new (window.AudioContext || window.webkitAudioContext)();
            const osc = ctx.createOscillator();
            const gain = ctx.createGain();
            osc.connect(gain);
            gain.connect(ctx.destination);
            osc.type = 'sine';
            osc.frequency.setValueAtTime(500, ctx.currentTime);
            osc.frequency.exponentialRampToValueAtTime(1000, ctx.currentTime + 0.1);
            gain.gain.setValueAtTime(0.1, ctx.currentTime);
            gain.gain.exponentialRampToValueAtTime(0.01, ctx.currentTime + 0.1);
            osc.start();
            osc.stop(ctx.currentTime + 0.1);
        };

        const playWrong = () => {
            const ctx = new (window.AudioContext || window.webkitAudioContext)();
            const osc = ctx.createOscillator();
            const gain = ctx.createGain();
            osc.connect(gain);
            gain.connect(ctx.destination);
            osc.type = 'sawtooth';
            osc.frequency.setValueAtTime(200, ctx.currentTime);
            osc.frequency.linearRampToValueAtTime(100, ctx.currentTime + 0.2);
            gain.gain.setValueAtTime(0.1, ctx.currentTime);
            gain.gain.exponentialRampToValueAtTime(0.01, ctx.currentTime + 0.2);
            osc.start();
            osc.stop(ctx.currentTime + 0.2);
        };

        // –¢–µ—Å—Ç —Å“±—Ä–∞“õ—Ç–∞—Ä—ã
        const quizData = [
            { type: 'choice', q: '1. –†–æ–º–∞–Ω–Ω—ã“£ –±–∞—Å—Ç—ã —Ç–∞“õ—ã—Ä—ã–±—ã –Ω–µ?', options: ['–ú–∞—Ö–∞–±–±–∞—Ç —Ö–∏–∫–∞—è—Å—ã', '–ñ–µ—Ä –¥–∞—É—ã, –∂–µ—Å—ñ—Ä –¥–∞—É—ã –∂”ô–Ω–µ ”ô–π–µ–ª —Ç–µ“£–¥—ñ–≥—ñ', '–ê“£—à—ã–ª—ã“õ ”©–Ω–µ—Ä'], correct: 1 },
            { type: 'choice', q: '2. "–ï—Å–∫—ñ –¥–∞–ª–∞ –∑–∞“£—ã–Ω—ã“£ —Å–æ“£“ì—ã —Ç“±—è“ì—ã" –∫—ñ–º?', options: ['–ú“Ø—Å—ñ—Ä–µ–ø', '–¢–æ—Ä—Å–∞–Ω', '–ï—Å–µ–Ω–µ–π'], correct: 2 },
            { type: 'choice', q: '3. “∞–ª–ø–∞–Ω “õ–∞–Ω–¥–∞–π –∂–∞“£–∞—à—ã–ª–¥—ã“õ –µ–Ω–≥—ñ–∑–¥—ñ?', options: ['“ö–∞—Ä—É-–∂–∞—Ä–∞“õ –∂–∞—Å–∞—É', '–°—É–∞—Ä–º–∞–ª—ã –µ–≥—ñ–Ω—à—ñ–ª—ñ–∫ –ø–µ–Ω –æ—Ç—ã—Ä—ã“õ—à—ã–ª—ã“õ', '–û—Ä—ã—Å —Ç—ñ–ª—ñ–Ω “Ø–π—Ä–µ—Ç—É'], correct: 1 },
            { type: 'choice', q: '4. –¢–æ—Ä—Å–∞–Ω–Ω—ã“£ ”ô–ª–µ—É–º–µ—Ç—Ç—ñ–∫ —Ä”©–ª—ñ “õ–∞–Ω–¥–∞–π?', options: ['–ê“õ—ã–Ω', '–ñ–∞“£–∞ –±—É—Ä–∂—É–∞–∑–∏—è ”©–∫—ñ–ª—ñ', '–ë–∏'], correct: 1 },
            { type: 'choice', q: '5. –û“õ–∏“ì–∞ “õ–∞–π “ì–∞—Å—ã—Ä–¥–∞ ”©—Ç–µ–¥—ñ?', options: ['XVIII “ì.', 'XIX “ì. –Ü–Ü –∂–∞—Ä—Ç—ã—Å—ã', 'XX “ì. –±–∞—Å—ã'], correct: 1 },
            { type: 'matching', q: '6-8. –ö–µ–π—ñ–ø–∫–µ—Ä–ª–µ—Ä–¥—ñ —Å–∏–ø–∞—Ç—Ç–∞–º–∞—Å—ã–º–µ–Ω —Å”ô–π–∫–µ—Å—Ç–µ–Ω–¥—ñ—Ä—ñ“£—ñ–∑:', items: [{k:'“∞–ª–ø–∞–Ω', v:'–ï–ª –∞–Ω–∞—Å—ã, —Ä–µ—Ñ–æ—Ä–º–∞—Ç–æ—Ä'}, {k:'–ú“Ø—Å—ñ—Ä–µ–ø', v:'–ê“õ—ã–Ω, –±–∞—è–Ω–¥–∞—É—à—ã'}, {k:'–¢–æ—Ä—Å–∞–Ω', v:'“ö—É, –º–∞–Ω—Å–∞–ø“õ–æ—Ä'}] },
            { type: 'reorder', q: '9-11. –°—é–∂–µ—Ç—Ç—ñ–∫ –¥–∞–º—É —Ä–µ—Ç—ñ–Ω “õ–æ–π—ã“£—ã–∑ (1-3):', items: ['–ï—Å–µ–Ω–µ–π–¥—ñ“£ –∞—É—ã–ª“ì–∞ –∫–µ–ª—É—ñ', '–ï—Å–µ–Ω–µ–π –º–µ–Ω “∞–ª–ø–∞–Ω–Ω—ã“£ “Ø–π–ª–µ–Ω—É—ñ', '“∞–ª–ø–∞–Ω–Ω—ã“£ –±–∏–ª—ñ–∫–∫–µ –∫–µ–ª—É—ñ'] },
            { type: 'choice', q: '12. –†–æ–º–∞–Ω–¥–∞“ì—ã "–¢“Ø–ª–µ–Ω–Ω—ñ“£ –∞—Å—ã" “õ–∞–Ω–¥–∞–π –º–∞“£—ã–∑“ì–∞ –∏–µ?', options: ['–ñ–∞–π “ì–∞–Ω–∞ —Ç–æ–π', '–≠—Ç–Ω–æ–≥—Ä–∞—Ñ–∏—è–ª—ã“õ –¥”ô—Å—Ç“Ø—Ä–ª–µ—Ä –∫”©—Ä—ñ–Ω—ñ—Å—ñ', '–¢–æ—Ä—Å–∞–Ω–Ω—ã“£ –∂–µ“£—ñ—Å—ñ'], correct: 1 },
            { type: 'choice', q: '13. “∞–ª–ø–∞–Ω–Ω—ã“£ –µ“£ —Å–µ–Ω—ñ–º–¥—ñ —Ä—É—Ö–∞–Ω–∏ —Å–µ—Ä—ñ–≥—ñ –∫—ñ–º?', options: ['–¢–æ—Ä—Å–∞–Ω', '–ú“Ø—Å—ñ—Ä–µ–ø', '–ö–µ–Ω–µ—Å–∞—Ä—ã'], correct: 1 },
            { type: 'choice', q: '14. –®—ã“ì–∞—Ä–º–∞–¥–∞“ì—ã –∫–æ–Ω—Ñ–ª–∏–∫—Ç –Ω–µ–≥—ñ–∑—ñ –Ω–µ?', options: ['–ï—Å–∫—ñ–ª—ñ–∫ –ø–µ–Ω –∂–∞“£–∞–ª—ã“õ—Ç—ã“£ –∫“Ø—Ä–µ—Å—ñ', '–ï–∫—ñ —Ä—É–¥—ã“£ —Å–æ“ì—ã—Å—ã', '–ë–∞–π –º–µ–Ω –∫–µ–¥–µ–π –∞–π—Ç—ã—Å—ã'], correct: 0 },
            { type: 'choice', q: '15. –†–æ–º–∞–Ω–Ω—ã“£ —à–µ—à—ñ–º—ñ–Ω–¥–µ “∞–ª–ø–∞–Ω “õ–∞–Ω–¥–∞–π –∫“Ø–π–¥–µ “õ–∞–ª–∞–¥—ã?', options: ['–ë–∞“õ—ã—Ç—Ç—ã –æ—Ç–±–∞—Å—ã–ª—ã“õ ”©–º—ñ—Ä', '–ñ–∞–ª“ì—ã–∑–¥—ã“õ', '–ë–∏–ª—ñ–∫—Ç–µ–Ω –∫–µ—Ç—É'], correct: 1 }
        ];

        function renderQuiz() {
            const container = document.getElementById('quiz-container');
            container.innerHTML = '';
            quizData.forEach((item, idx) => {
                const card = document.createElement('div');
                card.className = 'quiz-card p-6 rounded-xl shadow-lg';
                card.id = `q-card-${idx}`;
                
                let html = `<p class="font-bold mb-4 text-amber-400">${item.q}</p>`;

                if (item.type === 'choice') {
                    item.options.forEach((opt, i) => {
                        html += `<label class="block mb-2 p-3 rounded hover:bg-slate-700/50 cursor-pointer text-sm border border-transparent hover:border-slate-500/30 transition-all" id="q${idx}-opt${i}-label">
                            <input type="radio" name="q${idx}" value="${i}" class="mr-3 accent-amber-500"> ${opt}
                        </label>`;
                    });
                } else if (item.type === 'matching') {
                    item.items.forEach((pair, i) => {
                        html += `<div class="flex flex-col md:flex-row gap-2 mb-2 items-center text-xs">
                            <span class="bg-slate-800 p-2 rounded w-full md:w-32 text-center border border-slate-700 font-bold">${pair.k}</span>
                            <span class="text-amber-500 font-black">‚Üí</span>
                            <select class="bg-slate-700 border border-slate-600 rounded p-2 flex-1 w-full outline-none focus:border-amber-500" data-q="${idx}" data-i="${i}" id="q${idx}-sel${i}">
                                <option value="">–¢–∞“£–¥–∞“£—ã–∑...</option>
                                ${item.items.map(p => `<option value="${p.v}">${p.v}</option>`).join('')}
                            </select>
                        </div>`;
                    });
                } else if (item.type === 'reorder') {
                    item.items.forEach((task, i) => {
                        html += `<div class="flex gap-4 mb-2 items-center text-sm bg-slate-800/30 p-2 rounded">
                            <input type="number" min="1" max="3" class="w-12 bg-slate-900 border border-slate-600 rounded p-1 text-center text-amber-400 outline-none" data-q="${idx}" data-i="${i}" id="q${idx}-num${i}">
                            <span class="text-slate-300">${task}</span>
                        </div>`;
                    });
                }
                card.innerHTML = html;
                container.appendChild(card);
            });
        }

        // –¢–µ—Å—Ç—Ç—ñ —Ç–µ–∫—Å–µ—Ä—É –∂”ô–Ω–µ –±–æ—è—É
        function checkQuizResults() {
            let score = 0;
            quizData.forEach((q, idx) => {
                let isCorrect = false;
                if (q.type === 'choice') {
                    const selected = document.querySelector(`input[name="q${idx}"]:checked`);
                    const labels = document.querySelectorAll(`[id^="q${idx}-opt"]`);
                    labels.forEach(l => l.classList.remove('correct-answer', 'wrong-answer'));
                    if (selected) {
                        const val = parseInt(selected.value);
                        const label = document.getElementById(`q${idx}-opt${val}-label`);
                        if (val === q.correct) { label.classList.add('correct-answer'); isCorrect = true; }
                        else { 
                            label.classList.add('wrong-answer'); 
                            document.getElementById(`q${idx}-opt${q.correct}-label`).classList.add('correct-answer');
                        }
                    }
                } else if (q.type === 'matching') {
                    let count = 0;
                    q.items.forEach((p, i) => {
                        const el = document.getElementById(`q${idx}-sel${i}`);
                        el.classList.remove('correct-answer', 'wrong-answer');
                        if (el.value === p.v) { el.classList.add('correct-answer'); count++; }
                        else el.classList.add('wrong-answer');
                    });
                    if (count === 3) isCorrect = true;
                } else if (q.type === 'reorder') {
                    let count = 0;
                    q.items.forEach((p, i) => {
                        const el = document.getElementById(`q${idx}-num${i}`);
                        el.classList.remove('correct-answer', 'wrong-answer');
                        if (parseInt(el.value) === i + 1) { el.classList.add('correct-answer'); count++; }
                        else el.classList.add('wrong-answer');
                    });
                    if (count === 3) isCorrect = true;
                }
                if (isCorrect) score++;
            });

            if (score > quizData.length / 2) playCorrect(); else playWrong();
            const display = document.getElementById('quiz-score-display');
            display.innerText = `–°—ñ–∑–¥—ñ“£ –Ω”ô—Ç–∏–∂–µ“£—ñ–∑: ${score} / ${quizData.length}`;
            display.classList.remove('hidden');
            display.classList.add('animate-pop');
        }

        // “ö–ê–¢–ê–õ –≠–°–°–ï –¢–ï–ö–°–ï–†–£ –ê–õ–ì–û–†–ò–¢–ú–Ü
        function submitEssayStrict() {
            const content = document.getElementById('essay-content').value.trim();
            const wordCount = content.split(/\s+/).filter(w => w.length > 0).length;

            // –†–æ–º–∞–Ω“ì–∞ “õ–∞—Ç—ã—Å—Ç—ã –∫—ñ–ª—Ç —Å”©–∑–¥–µ—Ä
            const keywords = ['“∞–ª–ø–∞–Ω', '–ï—Å–µ–Ω–µ–π', '–¢–æ—Ä—Å–∞–Ω', '–ú“Ø—Å—ñ—Ä–µ–ø', '–ê—Ä—Ç—ã“õ–±–∞–π', '—Ö–∞–ª—ã“õ', '–∂–µ—Ä', '–¥–∞—É', '—Ä–µ—Ñ–æ—Ä–º–∞', '”ô–π–µ–ª', '—Ç–µ“£–¥—ñ–∫', '–±–∏–ª—ñ–∫', '–æ—Ç–∞—Ä—à—ã–ª–¥—ã“õ', '–¥”ô—Å—Ç“Ø—Ä', '—ç—Ç–Ω–æ–≥—Ä–∞—Ñ–∏—è', '–∞—É—ã–ª', '—Ç–∞“ì–¥—ã—Ä', '–∞“õ—ã–ª', '–∞–Ω–∞', '–±–æ–ª—ã—Å'];
            
            // –°”ô–π–∫–µ—Å –∫–µ–ª–µ—Ç—ñ–Ω —Å”©–∑–¥–µ—Ä–¥—ñ —Ç–∞–±—É
            let foundKeywords = keywords.filter(k => content.toLowerCase().includes(k.toLowerCase()));
            
            let score = 0;
            let analysis = "";
            let mistakes = [];
            let strengths = [];
            let note = "";
            let isFail = false;

            // 1. –ö”®–õ–ï–ú–ì–ï –®–ï–ö–¢–ï–£ (–°”©–∑ —Å–∞–Ω—ã 30-–¥–∞–Ω –∞–∑ –±–æ–ª—Å–∞ - “ö“∞–õ–ê–ô–î–´)
            if (wordCount < 30) {
                isFail = true;
                score = 2; // ”®—Ç–µ —Ç”©–º–µ–Ω –±–∞–ª–ª
                analysis = "–ñ“∞–ú–´–° “ö–ê–ë–´–õ–î–ê–ù–ë–ê–î–´. –ú”ô—Ç—ñ–Ω –∫”©–ª–µ–º—ñ —Ç—ã–º –∞–∑ (30 —Å”©–∑–¥–µ–Ω –∫–µ–º). –ë“±–ª —ç—Å—Å–µ –µ–º–µ—Å, –∂–∞–π “ì–∞–Ω–∞ “õ—ã—Å“õ–∞—à–∞ –ø—ñ–∫—ñ—Ä –Ω–µ–º–µ—Å–µ —Å”©–π–ª–µ–º.";
                mistakes.push("–°”©–∑ —Å–∞–Ω—ã –Ω–æ—Ä–º–∞“ì–∞ —Å–∞–π –µ–º–µ—Å.");
                mistakes.push("–¢–∞“õ—ã—Ä—ã–ø –º“Ø–ª–¥–µ–º –∞—à—ã–ª–º–∞“ì–∞–Ω.");
                mistakes.push("–¢–µ–∑–∏—Å –ø–µ–Ω –∞—Ä–≥—É–º–µ–Ω—Ç “õ“±—Ä—ã–ª—ã–º—ã —Å–∞“õ—Ç–∞–ª–º–∞“ì–∞–Ω.");
                note = "–ö–µ–ª–µ—Å—ñ –∂–æ–ª—ã –∫–µ–º –¥–µ–≥–µ–Ω–¥–µ 60-70 —Å”©–∑ –∂–∞–∑—ã–ø, –æ–π—ã“£—ã–∑–¥—ã —Ç–æ–ª—ã“õ –∂–µ—Ç–∫—ñ–∑—ñ“£—ñ–∑.";
            } 
            else {
                // 2. –ú–ê–ó–ú“∞–ù–î–´“ö –¢–ê–õ–î–ê–£
                let baseScore = 4; // –ë–∞—Å—Ç–∞–ø“õ—ã –±–∞–ª–ª
                
                // –ö—ñ–ª—Ç —Å”©–∑–¥–µ—Ä–≥–µ + –±–∞–ª–ª
                if (foundKeywords.length > 2) baseScore += 2;
                if (foundKeywords.length > 5) baseScore += 1;
                
                // –ö”©–ª–µ–º–≥–µ + –±–∞–ª–ª
                if (wordCount > 60) baseScore += 2;
                if (wordCount > 100) baseScore += 1;

                // –ú–∞–∫—Å–∏–º—É–º 10
                score = Math.min(baseScore, 10);

                if (foundKeywords.length < 2) {
                    score = Math.min(score, 4); // –ö—ñ–ª—Ç —Å”©–∑ –∂–æ“õ –±–æ–ª—Å–∞, –º–∞–∫—Å 4 –±–∞–ª–ª
                    mistakes.push("–ú”ô—Ç—ñ–Ω–¥–µ —à—ã“ì–∞—Ä–º–∞“ì–∞ “õ–∞—Ç—ã—Å—Ç—ã –Ω–∞“õ—Ç—ã —Ç–µ—Ä–º–∏–Ω–¥–µ—Ä –º–µ–Ω –µ—Å—ñ–º–¥–µ—Ä –∞–∑.");
                    analysis = "–≠—Å—Å–µ –∂–∞–∑—ã–ª“ì–∞–Ω, –±—ñ—Ä–∞“õ –º–∞–∑–º“±–Ω—ã —Ç—ã–º –∂–∞–ª–ø—ã–ª–∞–º–∞. –ù–∞“õ—Ç—ã —à—ã“ì–∞—Ä–º–∞ –æ“õ–∏“ì–∞–ª–∞—Ä—ã–Ω–∞ —Å“Ø–π–µ–Ω—É –∂–µ—Ç—ñ—Å–ø–µ–π–¥—ñ.";
                } else {
                    analysis = `–ñ“±–º—ã—Å –∂–∞“õ—Å—ã “õ“±—Ä—ã–ª—ã–º–¥–∞–ª“ì–∞–Ω. –ö”©–ª–µ–º—ñ: ${wordCount} —Å”©–∑. –®—ã“ì–∞—Ä–º–∞“ì–∞ “õ–∞—Ç—ã—Å—Ç—ã ${foundKeywords.length} –º–∞“£—ã–∑–¥—ã “±“ì—ã–º “õ–æ–ª–¥–∞–Ω—ã–ª“ì–∞–Ω.`;
                    strengths.push("–¢–∞“õ—ã—Ä—ã–ø –±–æ–π—ã–Ω—à–∞ –Ω–µ–≥—ñ–∑–≥—ñ –æ–π–ª–∞—Ä “õ–∞–º—Ç—ã–ª“ì–∞–Ω.");
                    strengths.push("–ö—ñ–ª—Ç —Å”©–∑–¥–µ—Ä –æ—Ä—ã–Ω–¥—ã “õ–æ–ª–¥–∞–Ω—ã–ª“ì–∞–Ω.");
                }
                
                if (score < 5) note = "–®—ã“ì–∞—Ä–º–∞–Ω—ã “õ–∞–π—Ç–∞ –æ“õ—ã–ø, –Ω–∞“õ—Ç—ã—Ä–∞“õ –¥”ô–ª–µ–ª–¥–µ—Ä –∫–µ–ª—Ç—ñ—Ä—ñ“£—ñ–∑.";
                else note = "–ñ–∞“õ—Å—ã –Ω”ô—Ç–∏–∂–µ! –ö–µ–ª–µ—Å—ñ–¥–µ —Å—Ç–∏–ª—å–¥—ñ–∫ —Ç“Ø—Ä–ª–µ–Ω–¥—ñ—Ä—É–ª–µ—Ä “õ–æ—Å—ã“£—ã–∑.";
            }

            displayReport(score, { analysis, mistakes, strengths, methodist_note: note }, isFail);
        }

        function displayReport(essayScore, aiDetails, isFail) {
            const report = document.getElementById('report-content');
            
            // –¢“Ø—Å—Ç–µ—Ä –º–µ–Ω —Ö–∞–±–∞—Ä–ª–∞–º–∞–Ω—ã –∞–Ω—ã“õ—Ç–∞—É
            const scoreColor = essayScore >= 8 ? 'text-green-400' : (essayScore >= 5 ? 'text-yellow-400' : 'text-red-500');
            const statusMsg = isFail ? "“ö–ê–ù–ê“í–ê–¢–¢–ê–ù–ê–†–õ–´“ö–°–´–ó!" : "–ñ“∞–ú–´–° “ö–ê–ë–´–õ–î–ê–ù–î–´";
            const statusClass = isFail ? "text-red-500 animate-pulse" : "text-green-400";

            report.innerHTML = `
                <div class="bg-slate-800 p-6 rounded-xl border-l-4 ${isFail ? 'border-red-500' : 'border-amber-500'} shadow-lg text-center">
                    <p class="text-xs uppercase text-slate-400 mb-2 font-bold tracking-widest">–≠—Å—Å–µ –±–∞“ì–∞—Å—ã</p>
                    <p class="text-6xl font-black ${scoreColor} mb-2">${essayScore} / 10</p>
                    <p class="text-lg font-bold ${statusClass}">${statusMsg}</p>
                </div>

                <div class="space-y-4 mt-6">
                    <div class="bg-slate-800/80 p-5 rounded-xl border border-slate-700 shadow-inner">
                        <h4 class="text-amber-500 font-bold mb-2 flex items-center gap-2">–ú–∞–º–∞–Ω —Å–∞—Ä–∞–ø—Ç–∞–º–∞—Å—ã:</h4>
                        <p class="text-sm leading-relaxed text-slate-300">${aiDetails.analysis}</p>
                    </div>
                    <div class="grid md:grid-cols-2 gap-4">
                        <div class="bg-red-900/10 p-5 rounded-xl border border-red-500/20 text-sm">
                            <h4 class="text-red-400 font-bold mb-2 italic">–ö–µ–º—à—ñ–ª—ñ–∫—Ç–µ—Ä:</h4>
                            ${aiDetails.mistakes.length > 0 ? `<ul class="list-disc ml-5 text-red-200/80 space-y-1">${aiDetails.mistakes.map(m => `<li>${m}</li>`).join('')}</ul>` : '<p class="text-slate-500 italic">–ï–ª–µ—É–ª—ñ “õ–∞—Ç–µ–ª–µ—Ä –∂–æ“õ</p>'}
                        </div>
                        <div class="bg-green-900/10 p-5 rounded-xl border border-green-500/20 text-sm">
                            <h4 class="text-green-400 font-bold mb-2">–ê—Ä—Ç—ã“õ—à—ã–ª—ã“õ—Ç–∞—Ä:</h4>
                            ${aiDetails.strengths.length > 0 ? `<ul class="list-disc ml-5 text-green-200/80 space-y-1">${aiDetails.strengths.map(m => `<li>${m}</li>`).join('')}</ul>` : '<p class="text-slate-500 italic">–ê—Ä—Ç—ã“õ—à—ã–ª—ã“õ—Ç–∞—Ä–¥—ã –∫”©—Ä—Å–µ—Ç—É “Ø—à—ñ–Ω –º–∞–∑–º“±–Ω–¥—ã —Ç–æ–ª—ã“õ—Ç—ã—Ä—ã“£—ã–∑</p>'}
                        </div>
                    </div>
                    <div class="bg-blue-900/10 p-5 rounded-xl border border-blue-500/20 text-sm text-center">
                        <h4 class="text-blue-400 font-bold mb-1">üìñ ”ò–¥—ñ—Å—Ç–µ–º–µ–ª—ñ–∫ –∫–µ“£–µ—Å:</h4>
                        <p class="italic text-slate-300">${aiDetails.methodist_note}</p>
                    </div>
                </div>
            `;
            document.getElementById('report-modal').classList.remove('hidden');
            if (isFail) playWrong(); else playCorrect();
        }

        document.getElementById('essay-content').addEventListener('input', function(e) {
            const words = e.target.value.trim().split(/\s+/).filter(w => w.length > 0).length;
            document.getElementById('word-count').innerText = `–°”©–∑ —Å–∞–Ω—ã: ${words} / 200`;
        });

        function closeModal() { document.getElementById('report-modal').classList.add('hidden'); }
        window.onload = renderQuiz;
    </script>
</body>
</html>